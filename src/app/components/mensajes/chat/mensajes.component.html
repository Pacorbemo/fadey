<div class="chat-container">
    <div class="mensajes" #mensajesContainer (scroll)="onScrollMensajes($event)">
      @if (!paginacion.cargadosCompletos) {
        <button class="btn-cargar-mas" (click)="cargarMasMensajes()" [disabled]="paginacion.cargandoMas">
          {{ paginacion.cargandoMas ? 'Cargando...' : 'Cargar m√°s mensajes' }}
        </button>
      }
      @for (grupo of mensajesAgrupadosPorDia(); track grupo.fecha) {
        <div class="separador-dia">
          <span>{{ grupo.fecha }}</span>
        </div>
        @for (mensaje of grupo.mensajes; let idx = $index; track idx) {
          <div
            class="burbuja"
            [ngClass]="mensaje.emisor_id === usuario.actual ? 'emisor' : 'receptor'"
          >
            <span>{{ mensaje.mensaje }}</span>
            <span class="hora">{{ mensaje.fecha_envio | date: 'HH:mm' }}</span>
          </div>
        }
      }
    </div>
    <div class="input-container">
      <input
        [(ngModel)]="mensaje"
        class="input-mensaje"
        placeholder="Escribe un mensaje..."
        (keydown.enter)="enviarMensaje()"
        autocomplete="off"
      />
      <button (click)="enviarMensaje()">Enviar</button>
    </div>
  
</div>