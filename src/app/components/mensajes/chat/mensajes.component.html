<div class="chat-container">
  @if (!cargandoService.cargando) {
    <div class="mensajes" #mensajesContainer>
      @for (grupo of mensajesAgrupadosPorDia(); track grupo.fecha) {
        <div class="separador-dia">
          <span>{{ grupo.fecha }}</span>
        </div>
        @for (mensaje of grupo.mensajes; let idx = $index; track idx) {
          <div
            class="burbuja"
            [ngClass]="mensaje.emisor_id === usuarioActual ? 'emisor' : 'receptor'"
          >
            <span>{{ mensaje.mensaje }}</span>
            <span class="hora">{{ mensaje.fecha_envio | date: 'HH:mm' }}</span>
          </div>
        }
      }
    </div>
    <div class="input-container">
      <input
        [(ngModel)]="mensaje"
        class="input-mensaje"
        placeholder="Escribe un mensaje..."
        (keydown.enter)="enviarMensaje()"
        autocomplete="off"
      />
      <button (click)="enviarMensaje()">Enviar</button>
    </div>
  }
</div>