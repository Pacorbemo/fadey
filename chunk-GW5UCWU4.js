import{b as P,d as R}from"./chunk-QSU6O5O7.js";import{b as y,c as v,d as S,e as j,f as x,g as O,n as k,o as E,q as F}from"./chunk-RQAWQA5G.js";import{$a as w,Ab as c,Bb as m,Cb as u,Ga as s,Ka as l,Pa as g,Ua as b,cb as h,hb as r,ib as n,lc as M,mb as f,nb as C,vb as d,wb as _}from"./chunk-2QB5VWAC.js";function N(o,T){if(o&1&&(r(0,"div",7),d(1),n()),o&2){let t=C();s(),_(t.mensaje)}}var D=(()=>{class o{constructor(t,i,e){this.route=t,this.http=i,this.router=e,this.password="",this.passwordRepetir="",this.mensaje="",this.cambiando=!1,this.token="",this.route.params.subscribe(p=>{this.token=p.token})}restablecerPassword(){if(this.password!==this.passwordRepetir){this.mensaje="Las contrase\xF1as no coinciden.";return}this.cambiando=!0,this.mensaje="",this.http.post(`/usuarios/restablecer-password/${this.token}`,{password:this.password}).subscribe({next:t=>{this.mensaje=t.mensaje||"Contrase\xF1a restablecida correctamente.",this.cambiando=!1,setTimeout(()=>this.router.navigate(["/inicio-sesion"]),2e3)},error:t=>{this.mensaje=t.error?.error||"Error al restablecer la contrase\xF1a.",this.cambiando=!1}})}static{this.\u0275fac=function(i){return new(i||o)(l(P),l(M),l(R))}}static{this.\u0275cmp=g({type:o,selectors:[["app-restablecer-password"]],decls:13,vars:4,consts:[[1,"restablecer-password-container"],[3,"ngSubmit"],["for","password"],["id","password","name","password","type","password","required","","minlength","6","autocomplete","new-password",3,"ngModelChange","ngModel"],["for","passwordRepetir"],["id","passwordRepetir","name","passwordRepetir","type","password","required","","minlength","6","autocomplete","new-password",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"mensaje"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"h2"),d(2,"Restablecer contrase\xF1a"),n(),r(3,"form",1),f("ngSubmit",function(){return e.restablecerPassword()}),r(4,"label",2),d(5,"Nueva contrase\xF1a"),n(),r(6,"input",3),u("ngModelChange",function(a){return m(e.password,a)||(e.password=a),a}),n(),r(7,"label",4),d(8,"Repetir nueva contrase\xF1a"),n(),r(9,"input",5),u("ngModelChange",function(a){return m(e.passwordRepetir,a)||(e.passwordRepetir=a),a}),n(),r(10,"button",6),d(11,"Restablecer contrase\xF1a"),n(),b(12,N,2,1,"div",7),n()()),i&2&&(s(6),c("ngModel",e.password),s(3),c("ngModel",e.passwordRepetir),s(),w("disabled",e.cambiando||e.password.length<6||e.password!==e.passwordRepetir),s(2),h(e.mensaje?12:-1))},dependencies:[F,O,y,v,S,k,E,x,j],styles:[".restablecer-password-container[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:2rem 2.5rem;background:#23272f;border-radius:12px;box-shadow:0 2px 16px #00000040;color:#fff}.restablecer-password-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.restablecer-password-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.4rem}.restablecer-password-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:.6rem;border:1px solid #444a57;border-radius:6px;font-size:1rem;background:#181b20;color:#fff;margin-bottom:1rem}.restablecer-password-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.7rem;background:linear-gradient(90deg,#007bff 60%,#0056b3);color:#fff;border:none;border-radius:6px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:background .2s}.restablecer-password-container[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{color:#06d6a0;text-align:center;margin-top:1.5rem}"]})}}return o})();export{D as RestablecerPasswordComponent};
